# Spinner ä¸‹æ‹‰åˆ—è¡¨ç¤ºä¾‹

## æ¦‚è¿°

è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Spinnerï¼ˆä¸‹æ‹‰åˆ—è¡¨ï¼‰ç»„ä»¶ï¼Œå®ç°äº†ä¸€ä¸ªå®Œæ•´çš„æ‰‹æœºè®¢è´­å‘å¯¼ï¼ŒåŒ…æ‹¬å“ç‰Œã€å‹å·ã€å®¹é‡å’Œé¢œè‰²çš„é€‰æ‹©ï¼Œä»¥åŠå“ç‰Œå’Œå‹å·çš„è”åŠ¨åŠŸèƒ½ã€‚

## è¿è¡Œæ–¹å¼

```bash
cd ~/termux-gui-rust-demo
cargo run --example spinner_demo --release
```

## åŠŸèƒ½ç‰¹æ€§

### 1. Spinner ç»„ä»¶ âœ…
- ä¸‹æ‹‰é€‰æ‹©åˆ—è¡¨
- åŠ¨æ€é€‰é¡¹è®¾ç½® (`setList`)
- é€‰é¡¹é€‰æ‹©äº‹ä»¶ (`itemselected`)
- å¤šä¸ªç‹¬ç«‹ Spinner

### 2. è”åŠ¨é€‰æ‹© âœ…
- å“ç‰Œé€‰æ‹©è§¦å‘å‹å·åˆ—è¡¨æ›´æ–°
- æ ¹æ®ä¸åŒå“ç‰Œæ˜¾ç¤ºä¸åŒå‹å·
- å®æ—¶å“åº”ç”¨æˆ·é€‰æ‹©

### 3. çŠ¶æ€ç®¡ç† âœ…
- è¿½è¸ªæ‰€æœ‰é€‰æ‹©çŠ¶æ€
- å®æ—¶æ›´æ–°ç»“æœæ˜¾ç¤º
- éªŒè¯é€‰æ‹©å®Œæ•´æ€§

### 4. åŠ¨æ€åé¦ˆ âœ…
- é¢œè‰²å˜åŒ–ï¼ˆå®Œæˆ/å¾…å®Œæˆï¼‰
- æ–‡å­—æç¤º
- è®¢è´­ç¡®è®¤

## ç•Œé¢ç»„æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ“± æ‰‹æœºè®¢è´­å‘å¯¼            â”‚
â”‚                             â”‚
â”‚ é€‰æ‹©å“ç‰Œ:                    â”‚
â”‚ [Apple â–¼]                   â”‚
â”‚                             â”‚
â”‚ é€‰æ‹©å‹å·:                    â”‚
â”‚ [iPhone 15 Pro Max â–¼]      â”‚
â”‚                             â”‚
â”‚ é€‰æ‹©å®¹é‡:                    â”‚
â”‚ [256GB â–¼]                   â”‚
â”‚                             â”‚
â”‚ é€‰æ‹©é¢œè‰²:                    â”‚
â”‚ [é’›é»‘è‰² â–¼]                   â”‚
â”‚                             â”‚
â”‚ âœ… å·²é€‰æ‹©:                   â”‚
â”‚ å“ç‰Œ: Apple                 â”‚
â”‚ å‹å·: iPhone 15 Pro Max     â”‚
â”‚ å®¹é‡: 256GB                 â”‚
â”‚ é¢œè‰²: é’›é»‘è‰²                 â”‚
â”‚                             â”‚
â”‚     [ğŸ›’ ç¡®è®¤è®¢è´­]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Spinner é€‰é¡¹

### å“ç‰Œé€‰é¡¹ï¼ˆ6ä¸ªï¼‰
```
Apple
Samsung
Huawei
Xiaomi
OPPO
Vivo
```

### å‹å·é€‰é¡¹ï¼ˆæ ¹æ®å“ç‰ŒåŠ¨æ€å˜åŒ–ï¼‰

**Apple**:
- iPhone 15 Pro Max
- iPhone 15 Pro
- iPhone 15
- iPhone 14

**Samsung**:
- Galaxy S24 Ultra
- Galaxy S24+
- Galaxy S24
- Galaxy Z Fold5

**Huawei**:
- Mate 60 Pro
- Mate 60
- P60 Pro
- P60

**Xiaomi**:
- 14 Ultra
- 14 Pro
- 14
- 13T Pro

**OPPO**:
- Find X7 Ultra
- Find X7
- Reno 11 Pro
- Reno 11

**Vivo**:
- X100 Pro
- X100
- S18 Pro
- S18

### å®¹é‡é€‰é¡¹ï¼ˆ5ä¸ªï¼‰
```
64GB
128GB
256GB
512GB
1TB
```

### é¢œè‰²é€‰é¡¹ï¼ˆ7ä¸ªï¼‰
```
é»‘è‰²
ç™½è‰²
é‡‘è‰²
é“¶è‰²
è“è‰²
ç´«è‰²
ç»¿è‰²
```

## API ä½¿ç”¨

### 1. åˆ›å»º Spinner

```rust
let brands = vec!["è¯·é€‰æ‹©", "Apple", "Samsung", "Huawei"];
let spinner = send_and_read(&mut main_stream, &json!({
    "method": "createSpinner",
    "params": {
        "aid": aid,
        "list": brands
    }
}))?;
let spinner_id = spinner.as_i64().unwrap();
```

### 2. æ›´æ–° Spinner åˆ—è¡¨

```rust
let models = vec!["è¯·é€‰æ‹©", "iPhone 15 Pro Max", "iPhone 15 Pro"];
send_and_read(&mut main_stream, &json!({
    "method": "setList",
    "params": {
        "aid": aid,
        "id": spinner_id,
        "list": models
    }
}))?;
```

### 3. å¤„ç†é€‰æ‹©äº‹ä»¶

```rust
if event_type == "itemselected" {
    let view_id = event["value"]["id"].as_i64().unwrap_or(-1);
    let index = event["value"]["index"].as_i64().unwrap_or(0) as usize;
    
    if view_id == spinner_id && index > 0 {
        let selected_item = items[index];
        println!("é€‰æ‹©äº†: {}", selected_item);
    }
}
```

## äº‹ä»¶è¯´æ˜

### itemselected äº‹ä»¶

```json
{
    "type": "itemselected",
    "value": {
        "aid": 1,
        "id": 42,
        "index": 2
    }
}
```

- **type**: å›ºå®šä¸º `"itemselected"`
- **aid**: Activity ID
- **id**: Spinner çš„ View ID
- **index**: é€‰ä¸­é¡¹çš„ç´¢å¼•ï¼ˆ0-basedï¼‰

## å®ç°è¦ç‚¹

### 1. è”åŠ¨é€‰æ‹©

å“ç‰Œé€‰æ‹©ä¼šè§¦å‘å‹å·åˆ—è¡¨çš„æ›´æ–°ï¼š

```rust
if view_id == brand_spinner_id && index > 0 {
    let brand = brands[index];
    
    // æ ¹æ®å“ç‰Œè·å–å‹å·åˆ—è¡¨
    let models = match brand {
        "Apple" => vec!["è¯·é€‰æ‹©", "iPhone 15 Pro Max", ...],
        "Samsung" => vec!["è¯·é€‰æ‹©", "Galaxy S24 Ultra", ...],
        _ => vec!["è¯·é€‰æ‹©"],
    };
    
    // æ›´æ–°å‹å· Spinner
    send_and_read(&mut main_stream, &json!({
        "method": "setList",
        "params": {"aid": aid, "id": model_spinner_id, "list": models}
    }))?;
}
```

### 2. çŠ¶æ€è¿½è¸ª

ä½¿ç”¨ `Arc<Mutex<Vec>>` è¿½è¸ªæ‰€æœ‰é€‰æ‹©ï¼š

```rust
let selections = Arc::new(Mutex::new(vec![
    ("å“ç‰Œ".to_string(), "".to_string()),
    ("å‹å·".to_string(), "".to_string()),
    ("å®¹é‡".to_string(), "".to_string()),
    ("é¢œè‰²".to_string(), "".to_string()),
]));
```

### 3. å®æ—¶åé¦ˆ

æ ¹æ®é€‰æ‹©çŠ¶æ€åŠ¨æ€æ›´æ–°ç»“æœæ˜¾ç¤ºï¼š

```rust
let all_selected = sels.iter().all(|(_, v)| !v.is_empty());

let result_text = if all_selected {
    format!("âœ… å·²é€‰æ‹©:\nå“ç‰Œ: {}\nå‹å·: {}\nå®¹é‡: {}\né¢œè‰²: {}",
        sels[0].1, sels[1].1, sels[2].1, sels[3].1)
} else {
    let missing: Vec<&str> = sels.iter()
        .filter(|(_, v)| v.is_empty())
        .map(|(k, _)| k.as_str())
        .collect();
    format!("âš ï¸ å¾…é€‰æ‹©: {}", missing.join(", "))
};
```

### 4. é¢œè‰²åé¦ˆ

```rust
let color = if all_selected { 
    0xFF4CAF50_u32  // ç»¿è‰²ï¼šå·²å®Œæˆ
} else { 
    0xFF666666_u32  // ç°è‰²ï¼šæœªå®Œæˆ
};

send_and_read(&mut main_stream, &json!({
    "method": "setTextColor",
    "params": {"aid": aid, "id": result_id, "color": color}
}))?;
```

## è¿è¡Œæ•ˆæœ

### åˆå§‹çŠ¶æ€
```
=== Spinner ä¸‹æ‹‰åˆ—è¡¨æ¼”ç¤º ===

âœ“ è¿æ¥å»ºç«‹
âœ“ ç•Œé¢åˆ›å»ºå®Œæˆ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æç¤º: ä»ä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰æ‹©
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ç»“æœæ˜¾ç¤º: âš ï¸ å¾…é€‰æ‹©: å“ç‰Œ, å‹å·, å®¹é‡, é¢œè‰²
```

### é€‰æ‹©å“ç‰Œå
```
ğŸ“± å“ç‰Œ: Apple

ç»“æœæ˜¾ç¤º: âš ï¸ å¾…é€‰æ‹©: å‹å·, å®¹é‡, é¢œè‰²
ï¼ˆå‹å·åˆ—è¡¨å·²æ›´æ–°ä¸º Apple çš„å‹å·ï¼‰
```

### å®Œæˆæ‰€æœ‰é€‰æ‹©
```
ğŸ“± å“ç‰Œ: Apple
ğŸ“± å‹å·: iPhone 15 Pro Max
ğŸ’¾ å®¹é‡: 256GB
ğŸ¨ é¢œè‰²: é’›é»‘è‰²

ç»“æœæ˜¾ç¤º: âœ… å·²é€‰æ‹©
å“ç‰Œ: Apple
å‹å·: iPhone 15 Pro Max
å®¹é‡: 256GB
é¢œè‰²: é’›é»‘è‰²
ï¼ˆæ–‡å­—å˜ä¸ºç»¿è‰²ï¼‰
```

### ç‚¹å‡»ç¡®è®¤è®¢è´­
```
ğŸ‰ è®¢è´­æˆåŠŸï¼

å“ç‰Œ: Apple
å‹å·: iPhone 15 Pro Max
å®¹é‡: 256GB
é¢œè‰²: é’›é»‘è‰²

æ„Ÿè°¢æ‚¨çš„è®¢è´­ï¼
```

## ä½¿ç”¨åœºæ™¯

### 1. ç”µå•†åº”ç”¨
- å•†å“è§„æ ¼é€‰æ‹©
- æ”¶è´§åœ°å€é€‰æ‹©
- é…é€æ–¹å¼é€‰æ‹©

### 2. è¡¨å•åº”ç”¨
- çœå¸‚åŒºä¸‰çº§è”åŠ¨
- å¹´æœˆæ—¥é€‰æ‹©å™¨
- åˆ†ç±»ç­›é€‰å™¨

### 3. è®¾ç½®ç•Œé¢
- è¯­è¨€é€‰æ‹©
- ä¸»é¢˜é€‰æ‹©
- å­—ä½“å¤§å°é€‰æ‹©

### 4. æ•°æ®å½•å…¥
- èŒä¸šé€‰æ‹©
- å­¦å†é€‰æ‹©
- è¡Œä¸šåˆ†ç±»

## æŠ€æœ¯ç‰¹ç‚¹

### 1. å¤š Spinner ç®¡ç†
- 4 ä¸ªç‹¬ç«‹çš„ Spinner ç»„ä»¶
- æ¯ä¸ª Spinner ç‹¬ç«‹è¿½è¸ªçŠ¶æ€
- é€šè¿‡ ID åŒºåˆ†ä¸åŒ Spinner

### 2. åŠ¨æ€åˆ—è¡¨æ›´æ–°
- `setList` æ–¹æ³•åŠ¨æ€ä¿®æ”¹é€‰é¡¹
- å“ç‰Œæ”¹å˜æ—¶è‡ªåŠ¨æ›´æ–°å‹å·
- å®æ—¶å“åº”ç”¨æˆ·æ“ä½œ

### 3. éªŒè¯å’Œæç¤º
- æ£€æŸ¥æ‰€æœ‰é€‰é¡¹æ˜¯å¦å·²é€‰æ‹©
- æ˜¾ç¤ºç¼ºå¤±çš„é€‰é¡¹
- æäº¤å‰éªŒè¯å®Œæ•´æ€§

### 4. ç”¨æˆ·ä½“éªŒ
- æ¸…æ™°çš„è§†è§‰åé¦ˆï¼ˆé¢œè‰²å˜åŒ–ï¼‰
- å®æ—¶çš„æ–‡å­—æç¤º
- å‹å¥½çš„é”™è¯¯æç¤º

## ä»£ç ç»Ÿè®¡

```
æ€»è¡Œæ•°:        ~550 è¡Œ
å‡½æ•°æ•°é‡:      8 ä¸ª
Spinner æ•°é‡:  4 ä¸ª
é€‰é¡¹æ€»æ•°:      30+ ä¸ª
å“ç‰Œæ•°æ®:      6 ä¸ªå“ç‰Œ Ã— 4-5 ä¸ªå‹å·
```

## ä¸å…¶ä»–ç¤ºä¾‹å¯¹æ¯”

| ç‰¹æ€§ | Checkbox | Switch | Radio | Spinner |
|------|----------|--------|-------|---------|
| ç»„ä»¶ç±»å‹ | CompoundButton | CompoundButton | RadioGroup | View |
| é€‰æ‹©æ–¹å¼ | å¤šé€‰ | å¼€å…³ | å•é€‰ | ä¸‹æ‹‰å•é€‰ |
| äº‹ä»¶ç±»å‹ | click | click | selected | itemselected |
| è”åŠ¨åŠŸèƒ½ | âŒ | âŒ | âŒ | âœ… |
| åŠ¨æ€åˆ—è¡¨ | âŒ | âŒ | âŒ | âœ… |
| å ç”¨ç©ºé—´ | ä¸­ | ä¸­ | å¤§ | å° |
| é€‚ç”¨åœºæ™¯ | è®¾ç½® | æ§åˆ¶ | è¡¨å• | è¡¨å• |

## æ‰©å±•å»ºè®®

### 1. ä¸‰çº§è”åŠ¨
```rust
// çœ -> å¸‚ -> åŒº
let provinces = vec!["å¹¿ä¸œçœ", "æµ™æ±Ÿçœ", "æ±Ÿè‹çœ"];
let cities_gd = vec!["å¹¿å·å¸‚", "æ·±åœ³å¸‚", "ä¸œèå¸‚"];
let districts_gz = vec!["å¤©æ²³åŒº", "è¶Šç§€åŒº", "æµ·ç åŒº"];
```

### 2. æœç´¢åŠŸèƒ½
```rust
// ç»“åˆ EditText å®ç°æœç´¢è¿‡æ»¤
let filtered = all_items.iter()
    .filter(|item| item.contains(search_text))
    .collect();
```

### 3. é»˜è®¤é€‰æ‹©
```rust
// è®¾ç½®é»˜è®¤é€‰ä¸­é¡¹
send_and_read(&mut main_stream, &json!({
    "method": "setSelection",
    "params": {"aid": aid, "id": spinner_id, "index": 2}
}))?;
```

### 4. å›¾æ ‡æ”¯æŒ
```rust
// åœ¨é€‰é¡¹æ–‡æœ¬ä¸­ä½¿ç”¨ Emoji
let items = vec!["ğŸ“± iPhone", "ğŸ¤– Android", "ğŸ’» PC"];
```

## å­¦ä¹ ä»·å€¼

### åˆå­¦è€…
âœ… ç†è§£ Spinner çš„åŸºæœ¬ç”¨æ³•  
âœ… å­¦ä¹ äº‹ä»¶å¤„ç†  
âœ… æŒæ¡çŠ¶æ€ç®¡ç†

### è¿›é˜¶å¼€å‘è€…
âœ… å®ç°è”åŠ¨é€‰æ‹©  
âœ… åŠ¨æ€åˆ—è¡¨æ›´æ–°  
âœ… å¤æ‚çŠ¶æ€è¿½è¸ª

### å®æˆ˜åº”ç”¨
âœ… å®Œæ•´çš„è®¢è´­æµç¨‹  
âœ… æ•°æ®éªŒè¯  
âœ… ç”¨æˆ·ä½“éªŒä¼˜åŒ–

## å¸¸è§é—®é¢˜

### Q1: Spinner é€‰é¡¹å¤ªå¤šæ€ä¹ˆåŠï¼Ÿ
A: å¯ä»¥ç»“åˆæœç´¢åŠŸèƒ½ï¼Œæˆ–ä½¿ç”¨åˆ†ç»„æ˜¾ç¤ºã€‚

### Q2: å¦‚ä½•å®ç°ä¸‰çº§è”åŠ¨ï¼Ÿ
A: æ·»åŠ ç¬¬ä¸‰ä¸ª Spinnerï¼Œç›‘å¬ç¬¬äºŒä¸ªçš„ itemselected äº‹ä»¶ã€‚

### Q3: å¦‚ä½•è·å–å½“å‰é€‰ä¸­é¡¹ï¼Ÿ
A: ä¿å­˜ indexï¼Œé€šè¿‡ç´¢å¼•è®¿é—®é€‰é¡¹æ•°ç»„ã€‚

### Q4: Spinner å¯ä»¥ä¸ºç©ºå—ï¼Ÿ
A: å¯ä»¥ï¼Œä½†å»ºè®®è‡³å°‘åŒ…å«ä¸€ä¸ª"è¯·é€‰æ‹©"æç¤ºé¡¹ã€‚

## ç›¸å…³ç¤ºä¾‹

- `input_demo.rs` - è¾“å…¥æ¡†ç¤ºä¾‹
- `radio_demo.rs` - å•é€‰ç»„ç¤ºä¾‹
- `checkbox_demo.rs` - å¤é€‰æ¡†ç¤ºä¾‹

---

**ç‰¹è‰²åŠŸèƒ½**: å“ç‰Œ-å‹å·è”åŠ¨é€‰æ‹© ğŸ”—  
**éš¾åº¦ç­‰çº§**: â­â­â­  
**ä»£ç è¡Œæ•°**: ~550 è¡Œ  
**æ¨èæŒ‡æ•°**: â­â­â­â­â­

Happy Coding! ğŸ¦€
