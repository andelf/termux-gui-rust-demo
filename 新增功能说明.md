# æ–°å¢åŠŸèƒ½è¯´æ˜ - EditText è¾“å…¥æ¡†æ”¯æŒ

## ğŸ†• æ–°å¢å†…å®¹

### 1. å®Œæ•´çš„ EditText æ¼”ç¤ºç¨‹åº

**æ–‡ä»¶**: `examples/input_demo.rs` (416è¡Œ)

**æ–°å¢åŠŸèƒ½**:
- âœ… **EditText åˆ›å»º** - ä¸‰ç§è¾“å…¥ç±»å‹
  - æ™®é€šæ–‡æœ¬è¾“å…¥ï¼ˆtextï¼‰
  - æ•°å­—è¾“å…¥ï¼ˆnumberï¼‰
  - å¤šè¡Œæ–‡æœ¬è¾“å…¥ï¼ˆtextMultiLineï¼‰
  
- âœ… **getText() æ–¹æ³•** - è¯»å–è¾“å…¥æ¡†å†…å®¹
  ```rust
  let response = send_and_read(&mut main_stream, &json!({
      "method": "getText",
      "params": {"aid": aid, "id": edittext_id}
  }))?;
  let text = response.as_str().unwrap_or("");
  ```

- âœ… **setText() æ–¹æ³•** - åŠ¨æ€è®¾ç½®è¾“å…¥æ¡†å†…å®¹
  ```rust
  send_message(&mut main_stream, &json!({
      "method": "setText",
      "params": {"aid": aid, "id": edittext_id, "text": "æ–°å†…å®¹"}
  }))?;
  ```

- âœ… **è¾“å…¥éªŒè¯** - æ£€æŸ¥å¿…å¡«å­—æ®µ
  ```rust
  if name.is_empty() {
      "âš ï¸ è¯·è¾“å…¥å§“åï¼"
  } else {
      format!("âœ… æäº¤æˆåŠŸï¼\nå§“å: {}", name)
  }
  ```

- âœ… **ä¸‰ä¸ªäº¤äº’æŒ‰é’®**
  - æäº¤æŒ‰é’®ï¼šè¯»å–å¹¶å¤„ç†æ‰€æœ‰è¾“å…¥
  - æ¸…ç©ºæŒ‰é’®ï¼šæ¸…é™¤æ‰€æœ‰è¾“å…¥æ¡†å†…å®¹
  - æµ‹è¯•æŒ‰é’®ï¼šè‡ªåŠ¨å¡«å……æµ‹è¯•æ•°æ®

### 2. è¯¦ç»†çš„ç¤ºä¾‹æ–‡æ¡£

**æ–‡ä»¶**: `examples/README.md` (5KB)

åŒ…å«ï¼š
- ä¸¤ä¸ªç¤ºä¾‹çš„å®Œæ•´è¯´æ˜
- ç•Œé¢æˆªå›¾ï¼ˆASCII artï¼‰
- åŠŸèƒ½å¯¹æ¯”è¡¨
- æŠ€æœ¯ç»†èŠ‚è¯´æ˜
- æœ€ä½³å®è·µå»ºè®®
- æ‰©å±•æ–¹å‘

### 3. æµ‹è¯•è„šæœ¬

**æ–‡ä»¶**: `test_all.sh`

ä¸€é”®æµ‹è¯•æ‰€æœ‰ç¤ºä¾‹ç¨‹åºçš„è„šæœ¬ã€‚

---

## ğŸ“Š å®ç°çš„API

### EditText åˆ›å»º

```json
{
    "method": "createEditText",
    "params": {
        "aid": <activity_id>,
        "text": <åˆå§‹æ–‡æœ¬>,
        "parent": <çˆ¶å¸ƒå±€ID>,
        "singleline": <true/false>,
        "line": <true/false>,
        "blockinput": <true/false>,
        "type": <è¾“å…¥ç±»å‹>
    }
}
```

**æ”¯æŒçš„è¾“å…¥ç±»å‹**:
- `"text"` - æ™®é€šæ–‡æœ¬
- `"textMultiLine"` - å¤šè¡Œæ–‡æœ¬
- `"number"` - æ•°å­—
- `"numberDecimal"` - å°æ•°
- `"numberSigned"` - å¸¦ç¬¦å·æ•°å­—
- `"numberDecimalSigned"` - å¸¦ç¬¦å·å°æ•°
- `"phone"` - ç”µè¯å·ç 
- `"textEmailAddress"` - é‚®ç®±
- `"textPassword"` - å¯†ç 

### è¯»å–æ–‡æœ¬

```json
{
    "method": "getText",
    "params": {
        "aid": <activity_id>,
        "id": <view_id>
    }
}
```

**è¿”å›**: å­—ç¬¦ä¸²

### è®¾ç½®æ–‡æœ¬

```json
{
    "method": "setText",
    "params": {
        "aid": <activity_id>,
        "id": <view_id>,
        "text": <æ–°æ–‡æœ¬>
    }
}
```

---

## ğŸ¯ å®Œæ•´åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | ä¸»ç¨‹åº | button_demo | input_demo |
|------|--------|-------------|------------|
| Activity | âœ… | âœ… | âœ… |
| TextView | âœ… | âœ… | âœ… |
| Button | âŒ | âœ… | âœ… |
| EditText | âŒ | âŒ | âœ… |
| LinearLayout | âŒ | âœ… | âœ… |
| getText() | âŒ | âŒ | âœ… |
| setText() | âœ… | âœ… | âœ… |
| Click äº‹ä»¶ | âŒ | âœ… | âœ… |
| Text äº‹ä»¶ | âŒ | âŒ | âœ… (å¯é€‰) |
| è¾“å…¥éªŒè¯ | âŒ | âŒ | âœ… |
| åŠ¨æ€é¢œè‰² | âœ… | âœ… | âœ… |

---

## ğŸ’» è¿è¡Œç¤ºä¾‹

### åŸºç¡€ Hello World

```bash
./target/release/termux-gui-rust-demo
# æˆ–è‡ªåŠ¨æ¨¡å¼
AUTO_MODE=1 ./target/release/termux-gui-rust-demo
```

### æŒ‰é’®äº¤äº’

```bash
cargo run --example button_demo --release
```

### è¾“å…¥æ¡†äº¤äº’ ğŸ†•

```bash
cargo run --example input_demo --release
```

### æµ‹è¯•æ‰€æœ‰ç¤ºä¾‹

```bash
./test_all.sh
```

---

## ğŸ“ˆ ä»£ç ç»Ÿè®¡

| æ–‡ä»¶ | è¡Œæ•° | æ§ä»¶æ•° | åŠŸèƒ½ |
|------|------|--------|------|
| src/main.rs | 270 | 1 | Hello World |
| examples/button_demo.rs | 191 | 7 | æŒ‰é’®äº¤äº’ |
| examples/input_demo.rs | 416 | 12+ | è¾“å…¥æ¡†äº¤äº’ |
| **æ€»è®¡** | **877** | **20+** | - |

---

## ğŸ¨ input_demo ç•Œé¢å¸ƒå±€

```
Activity (dialog mode)
â””â”€â”€ LinearLayout (vertical)
    â”œâ”€â”€ TextView (æ ‡é¢˜ "æ–‡æœ¬è¾“å…¥æ¼”ç¤º ğŸ“")
    â”œâ”€â”€ TextView (è¯´æ˜ "åœ¨ä¸‹æ–¹è¾“å…¥ä½ çš„åå­—:")
    â”œâ”€â”€ EditText (å§“åè¾“å…¥æ¡† - text)
    â”œâ”€â”€ TextView (è¯´æ˜ "è¾“å…¥ä¸€ä¸ªæ•°å­—:")
    â”œâ”€â”€ EditText (æ•°å­—è¾“å…¥æ¡† - number)
    â”œâ”€â”€ TextView (è¯´æ˜ "è¾“å…¥å¤šè¡Œæ¶ˆæ¯:")
    â”œâ”€â”€ EditText (å¤šè¡Œè¾“å…¥æ¡† - textMultiLine)
    â”œâ”€â”€ LinearLayout (horizontal)
    â”‚   â”œâ”€â”€ Button ("âœ… æäº¤")
    â”‚   â”œâ”€â”€ Button ("ğŸ—‘ï¸ æ¸…ç©º")
    â”‚   â””â”€â”€ Button ("ğŸ§ª æµ‹è¯•")
    â”œâ”€â”€ TextView (åˆ†éš”çº¿)
    â””â”€â”€ TextView (ç»“æœæ˜¾ç¤ºåŒºåŸŸ)
```

---

## ğŸ” æŠ€æœ¯äº®ç‚¹

### 1. å¤šç§è¾“å…¥ç±»å‹æ”¯æŒ

```rust
// æ™®é€šæ–‡æœ¬
"type": "text"

// æ•°å­—ï¼ˆè‡ªåŠ¨å¼¹å‡ºæ•°å­—é”®ç›˜ï¼‰
"type": "number"

// å¤šè¡Œæ–‡æœ¬ï¼ˆå…è®¸æ¢è¡Œï¼‰
"type": "textMultiLine"
```

### 2. è¾“å…¥å†…å®¹è¯»å–å’Œå¤„ç†

```rust
// è¯»å–å§“å
let name_response = send_and_read(&mut main_stream, &json!({
    "method": "getText",
    "params": {"aid": aid, "id": name_input_id}
}))?;
let name = name_response.as_str().unwrap_or("");

// è¯»å–æ•°å­—å¹¶è§£æ
let number_str = number_response.as_str().unwrap_or("0");
let number: i32 = number_str.parse().unwrap_or(0);

// è¯»å–å¤šè¡Œæ–‡æœ¬
let message = message_response.as_str().unwrap_or("");
```

### 3. è¾“å…¥éªŒè¯å’Œåé¦ˆ

```rust
let result_text = if name.is_empty() {
    "âš ï¸ è¯·è¾“å…¥å§“åï¼".to_string()
} else {
    format!(
        "âœ… æäº¤æˆåŠŸï¼\n\n\
        å§“å: {}\n\
        æ•°å­—: {} (x2 = {})",
        name, number, number * 2
    )
};

// æ ¹æ®éªŒè¯ç»“æœè®¾ç½®é¢œè‰²
let color = if name.is_empty() {
    0xFFF44336u32 as i32  // çº¢è‰²ï¼ˆé”™è¯¯ï¼‰
} else {
    0xFF4CAF50u32 as i32  // ç»¿è‰²ï¼ˆæˆåŠŸï¼‰
};
```

### 4. åŠ¨æ€å†…å®¹è®¾ç½®

```rust
// æµ‹è¯•æŒ‰é’® - è‡ªåŠ¨å¡«å……æ•°æ®
send_message(&mut main_stream, &json!({
    "method": "setText",
    "params": {"aid": aid, "id": name_input_id, "text": "å¼ ä¸‰"}
}))?;

// æ¸…ç©ºæŒ‰é’® - æ¸…é™¤æ‰€æœ‰å†…å®¹
send_message(&mut main_stream, &json!({
    "method": "setText",
    "params": {"aid": aid, "id": name_input_id, "text": ""}
}))?;
```

---

## ğŸ“ å­¦ä¹ ä»·å€¼

é€šè¿‡ input_demoï¼Œä½ å°†å­¦ä¼šï¼š

1. **EditText å®Œæ•´ä½¿ç”¨**
   - åˆ›å»ºä¸åŒç±»å‹çš„è¾“å…¥æ¡†
   - è¯»å–ç”¨æˆ·è¾“å…¥
   - åŠ¨æ€è®¾ç½®å†…å®¹

2. **è¡¨å•å¤„ç†**
   - å¤šä¸ªè¾“å…¥æ¡†ç®¡ç†
   - è¾“å…¥éªŒè¯
   - ç»“æœå±•ç¤º

3. **äº¤äº’è®¾è®¡**
   - æäº¤æµç¨‹
   - æ¸…ç©ºé‡ç½®
   - æµ‹è¯•æ•°æ®å¡«å……

4. **å®é™…åº”ç”¨åŸºç¡€**
   - ç™»å½•è¡¨å•
   - æ³¨å†Œè¡¨å•
   - æœç´¢æ¡†
   - èŠå¤©è¾“å…¥

---

## ğŸš€ å¯æ‰©å±•æ–¹å‘

### åŸºäº input_demo å¯ä»¥å®ç°ï¼š

1. **ç™»å½•ç•Œé¢**
```rust
EditText (ç”¨æˆ·å - text)
EditText (å¯†ç  - textPassword)
Button (ç™»å½•)
TextView (é”™è¯¯æç¤º)
```

2. **è®¡ç®—å™¨**
```rust
EditText (æ•°å­—1 - number)
EditText (æ•°å­—2 - number)
Button (+, -, Ã—, Ã·)
TextView (ç»“æœ)
```

3. **å¤‡å¿˜å½•**
```rust
EditText (æ ‡é¢˜ - text)
EditText (å†…å®¹ - textMultiLine)
Button (ä¿å­˜)
TextView (æ˜¾ç¤ºåˆ—è¡¨)
```

4. **æœç´¢åŠŸèƒ½**
```rust
EditText (æœç´¢å…³é”®è¯ - text)
Button (æœç´¢)
TextView (æœç´¢ç»“æœ)
```

---

## ğŸ“ ä¸ Python å®ç°å¯¹æ¯”

### Python ç‰ˆæœ¬

```python
import termuxgui as tg

with tg.Connection() as c:
    a = tg.Activity(c, dialog=True)
    layout = tg.LinearLayout(a)
    
    et = tg.EditText(a, "", layout, singleline=True, inputtype="text")
    button = tg.Button(a, "æäº¤", layout)
    
    for ev in c.events():
        if ev.type == tg.Event.click and ev.value["id"] == button:
            text = et.gettext()
            print(text)
```

**ä»£ç é‡**: ~15è¡Œ

### Rust ç‰ˆæœ¬

```rust
// åˆ›å»º EditText
let et_id = send_and_read(&mut main_stream, &json!({
    "method": "createEditText",
    "params": {
        "aid": aid,
        "text": "",
        "parent": layout_id,
        "singleline": true,
        "type": "text"
    }
}))?.as_i64().unwrap();

// åˆ›å»º Button
let button_id = send_and_read(&mut main_stream, &json!({
    "method": "createButton",
    "params": {"aid": aid, "text": "æäº¤", "parent": layout_id}
}))?.as_i64().unwrap();

// äº‹ä»¶å¤„ç†
if event_type == "click" && clicked_id == button_id {
    let response = send_and_read(&mut main_stream, &json!({
        "method": "getText",
        "params": {"aid": aid, "id": et_id}
    }))?;
    let text = response.as_str().unwrap_or("");
    println!("{}", text);
}
```

**ä»£ç é‡**: ~30è¡Œ

**å¯¹æ¯”**:
- Python æ›´ç®€æ´ï¼ˆé«˜çº§å°è£…ï¼‰
- Rust æ›´è¯¦ç»†ï¼ˆåº•å±‚æ§åˆ¶ï¼‰
- Rust æ€§èƒ½æ›´å¥½ï¼ˆç¼–è¯‘ä¼˜åŒ–ï¼‰
- Rust ç±»å‹æ›´å®‰å…¨ï¼ˆç¼–è¯‘æ—¶æ£€æŸ¥ï¼‰

---

## âœ… æ€»ç»“

input_demo æ˜¯ä¸€ä¸ªå®Œæ•´çš„è¡¨å•è¾“å…¥æ¼”ç¤ºï¼Œå±•ç¤ºäº†ï¼š

1. âœ… **EditText å®Œæ•´å®ç°** - ä¸‰ç§è¾“å…¥ç±»å‹
2. âœ… **getText/setText** - è¯»å†™æ“ä½œ
3. âœ… **è¾“å…¥éªŒè¯** - å¿…å¡«æ£€æŸ¥
4. âœ… **äº¤äº’è®¾è®¡** - æäº¤/æ¸…ç©º/æµ‹è¯•
5. âœ… **è§†è§‰åé¦ˆ** - é¢œè‰²å˜åŒ–
6. âœ… **å®ç”¨åŠŸèƒ½** - å¯ç›´æ¥ç”¨äºå®é™…é¡¹ç›®

**ä¸‹ä¸€æ­¥**: åŸºäºè¿™äº›ç¤ºä¾‹ï¼Œä½ å¯ä»¥å¼€å‘ä»»ä½•éœ€è¦ç”¨æˆ·è¾“å…¥çš„åº”ç”¨ï¼

---

**åˆ›å»ºæ—¥æœŸ**: 2025  
**çŠ¶æ€**: âœ… å®Œæˆå¹¶æµ‹è¯•  
**äºŒè¿›åˆ¶å¤§å°**: 750KB
