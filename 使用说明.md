# Termux:GUI Rust Demo ä½¿ç”¨è¯´æ˜

## é¡¹ç›®ä¿¡æ¯

- **é¡¹ç›®åç§°**: termux-gui-rust-demo
- **ç¼–ç¨‹è¯­è¨€**: Rust
- **äºŒè¿›åˆ¶å¤§å°**: 756KB
- **æ¶æ„**: ARM aarch64 (64ä½)
- **ç›®æ ‡å¹³å°**: Android 24+

## å‰ç½®æ¡ä»¶

### 1. å®‰è£… Termux:GUI æ’ä»¶

ä»ä»¥ä¸‹ä»»ä¸€æ¸ é“ä¸‹è½½å®‰è£…ï¼š

- **F-Droid**: https://f-droid.org/packages/com.termux.gui/
- **GitHub**: https://github.com/termux/termux-gui/releases

### 2. ç¡®è®¤æ’ä»¶å·²å®‰è£…

```bash
pm list packages | grep termux.gui
```

åº”è¯¥çœ‹åˆ°ï¼š`package:com.termux.gui`

## å¿«é€Ÿå¼€å§‹

### æ–¹æ³•1: ä½¿ç”¨è„šæœ¬è¿è¡Œ

```bash
cd ~/termux-gui-rust-demo
./run.sh
```

### æ–¹æ³•2: ç›´æ¥è¿è¡Œ

```bash
cd ~/termux-gui-rust-demo
./target/release/termux-gui-rust-demo
```

### æ–¹æ³•3: ä½¿ç”¨ cargo è¿è¡Œ

```bash
cd ~/termux-gui-rust-demo
cargo run --release
```

## é¢„æœŸè¡Œä¸º

ç¨‹åºè¿è¡Œåä¼šï¼š

1. **åˆå§‹åŒ–é˜¶æ®µ** (1-2ç§’)
   - ç”ŸæˆéšæœºSocketåœ°å€
   - åˆ›å»ºUnix Domain Socket
   - å‘é€å¹¿æ’­é€šçŸ¥æ’ä»¶
   - å»ºç«‹è¿æ¥å¹¶æ¡æ‰‹

2. **æ˜¾ç¤ºé˜¶æ®µ1** (5ç§’)
   - åˆ›å»ºæ–°çš„Activity
   - æ˜¾ç¤º "Hello World from Rust! ğŸ¦€"

3. **æ˜¾ç¤ºé˜¶æ®µ2** (5ç§’)
   - æ›´æ–°æ–‡æœ¬ä¸º "Goodbye World! ğŸ‘‹"
   - åŒ…å«å‰¯æ ‡é¢˜è¯´æ˜

4. **é€€å‡ºé˜¶æ®µ**
   - å…³é—­Activity
   - æ¸…ç†èµ„æº
   - ç¨‹åºç»“æŸ

**æ€»è¿è¡Œæ—¶é—´**: çº¦11-12ç§’

## ç»ˆç«¯è¾“å‡ºç¤ºä¾‹

```
=== Termux:GUI Rust Demo ===

ç”ŸæˆSocketåœ°å€:
  Main Socket: 8KjN2mZpQvXcBfLr9dYt
  Event Socket: 5HwR6nPqGzWsJxMv3uTc

Socketå·²ç»‘å®šï¼Œç­‰å¾…è¿æ¥...
å¹¿æ’­å·²å‘é€ï¼Œç­‰å¾…æ’ä»¶è¿æ¥...

âœ“ Main Socket å·²è¿æ¥
âœ“ Event Socket å·²è¿æ¥

æ‰§è¡Œåè®®æ¡æ‰‹...
âœ“ åè®®æ¡æ‰‹æˆåŠŸ

åˆ›å»ºActivity...
å‘é€æ¶ˆæ¯: {"method":"newActivity","params":{"canceloutside":true,"intercept":false}}
æ¥æ”¶æ¶ˆæ¯: [1,"task_abc123"]
âœ“ Activityåˆ›å»ºæˆåŠŸ: ID=1, Task=task_abc123

åˆ›å»ºTextView...
å‘é€æ¶ˆæ¯: {"method":"createTextView","params":{"aid":1,"text":"Hello World from Rust! ğŸ¦€"}}
æ¥æ”¶æ¶ˆæ¯: 42
âœ“ TextViewåˆ›å»ºæˆåŠŸ: ID=42

ç¨‹åºå°†æ˜¾ç¤ºHello World 5ç§’...
äº‹ä»¶ç›‘å¬çº¿ç¨‹å·²å¯åŠ¨...

ğŸ“¨ æ”¶åˆ°äº‹ä»¶: {"type":"create","value":{"aid":1}}
ğŸ“¨ æ”¶åˆ°äº‹ä»¶: {"type":"start","value":{"aid":1}}
ğŸ“¨ æ”¶åˆ°äº‹ä»¶: {"type":"resume","value":{"aid":1}}

æ›´æ–°TextViewæ–‡æœ¬...
å‘é€æ¶ˆæ¯: {"method":"setText","params":{"aid":1,"id":42,"text":"Goodbye World! ğŸ‘‹..."}}
âœ“ æ–‡æœ¬å·²æ›´æ–°

å†æ˜¾ç¤º5ç§’åè‡ªåŠ¨å…³é—­...

å…³é—­Activity...
å‘é€æ¶ˆæ¯: {"method":"finishActivity","params":{"aid":1}}
âœ“ Activityå·²å…³é—­

ğŸ“¨ æ”¶åˆ°äº‹ä»¶: {"type":"destroy","value":{"aid":1,"finishing":true}}

=== ç¨‹åºç»“æŸ ===
```

## å¸¸è§é—®é¢˜

### Q: ç¨‹åºè¿è¡Œåæ²¡æœ‰æ˜¾ç¤ºçª—å£

**å¯èƒ½åŸå› **:
1. Termux:GUI æ’ä»¶æœªå®‰è£…
2. æ’ä»¶ç‰ˆæœ¬è¿‡æ—§
3. æƒé™é—®é¢˜

**è§£å†³æ–¹æ³•**:
```bash
# æ£€æŸ¥æ’ä»¶
pm list packages | grep termux.gui

# å¦‚æœæœªå®‰è£…ï¼Œä¸‹è½½å¹¶å®‰è£…
# ä» F-Droid æˆ– GitHub è·å–æœ€æ–°ç‰ˆæœ¬

# é‡å¯ Termux
exit
# é‡æ–°æ‰“å¼€ Termux å†è¿è¡Œ
```

### Q: å‡ºç° "Permission denied" é”™è¯¯

**è§£å†³æ–¹æ³•**:
```bash
# ç¡®ä¿åœ¨ HOME ç›®å½•ä¸‹è¿è¡Œ
cd ~/termux-gui-rust-demo

# ç¡®ä¿æœ‰æ‰§è¡Œæƒé™
chmod +x ./target/release/termux-gui-rust-demo
```

### Q: ç¼–è¯‘å¤±è´¥

**è§£å†³æ–¹æ³•**:
```bash
# æ¸…ç†å¹¶é‡æ–°ç¼–è¯‘
cd ~/termux-gui-rust-demo
cargo clean
cargo build --release
```

### Q: è¿æ¥è¶…æ—¶

**å¯èƒ½åŸå› **: æ’ä»¶æœªå“åº”å¹¿æ’­

**è§£å†³æ–¹æ³•**:
1. ç¡®è®¤æ’ä»¶å·²å®‰è£…å¹¶å¯ç”¨
2. é‡å¯ Android è®¾å¤‡
3. æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–åº”ç”¨å ç”¨æ’ä»¶

### Q: ç¨‹åºè¿è¡Œä½†ç«‹å³é€€å‡º

**æ£€æŸ¥**:
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
./target/release/termux-gui-rust-demo 2>&1 | tee output.log
cat output.log
```

## é¡¹ç›®ç»“æ„

```
termux-gui-rust-demo/
â”œâ”€â”€ Cargo.toml              # é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ Cargo.lock              # ä¾èµ–é”å®šæ–‡ä»¶
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main.rs             # ä¸»ç¨‹åºæºä»£ç 
â”œâ”€â”€ target/
â”‚   â””â”€â”€ release/
â”‚       â””â”€â”€ termux-gui-rust-demo  # ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶
â”œâ”€â”€ README.md               # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ æ¶æ„å¯¹æ¯”.md             # Python vs Rust å¯¹æ¯”
â”œâ”€â”€ ä½¿ç”¨è¯´æ˜.md             # æœ¬æ–‡ä»¶
â””â”€â”€ run.sh                  # è¿è¡Œè„šæœ¬
```

## æ€§èƒ½ç‰¹ç‚¹

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| äºŒè¿›åˆ¶å¤§å° | 756KB |
| å¯åŠ¨æ—¶é—´ | ~50ms |
| å†…å­˜å ç”¨ | ~3MB |
| CPUä½¿ç”¨ | æä½ |
| è¿æ¥å»¶è¿Ÿ | <100ms |

## è¿›é˜¶ä½¿ç”¨

### ä¿®æ”¹æ˜¾ç¤ºå†…å®¹

ç¼–è¾‘ `src/main.rs`ï¼Œæ‰¾åˆ°ä»¥ä¸‹ä»£ç ï¼š

```rust
let textview_msg = json!({
    "method": "createTextView",
    "params": {
        "aid": aid,
        "text": "Hello World from Rust! ğŸ¦€"  // ä¿®æ”¹è¿™é‡Œ
    }
});
```

ä¿®æ”¹åé‡æ–°ç¼–è¯‘ï¼š
```bash
cargo build --release
```

### ä¿®æ”¹æ˜¾ç¤ºæ—¶é—´

æ‰¾åˆ° `thread::sleep` è¯­å¥ï¼š

```rust
thread::sleep(Duration::from_secs(5));  // ä¿®æ”¹ç§’æ•°
```

### æ·»åŠ æ›´å¤šäº¤äº’

å‚è€ƒ Termux:GUI API æ–‡æ¡£ï¼Œå¯ä»¥æ·»åŠ ï¼š
- Button (æŒ‰é’®)
- EditText (è¾“å…¥æ¡†)
- ImageView (å›¾ç‰‡)
- LinearLayout (å¸ƒå±€)
- ç­‰ç­‰...

## å­¦ä¹ èµ„æº

### å®˜æ–¹æ–‡æ¡£
- [Termux:GUI ä¸»é¡µ](https://github.com/termux/termux-gui)
- [Termux:GUI API æ–‡æ¡£](https://github.com/termux/termux-gui/blob/main/Protocol.md)

### Rust å­¦ä¹ 
- [Rust å®˜æ–¹æ–‡æ¡£](https://doc.rust-lang.org/book/)
- [Rust By Example](https://doc.rust-lang.org/rust-by-example/)

### æœ¬é¡¹ç›®ç›¸å…³
- `README.md` - æŠ€æœ¯å®ç°è¯¦è§£
- `æ¶æ„å¯¹æ¯”.md` - Python vs Rust è¯¦ç»†å¯¹æ¯”
- `src/main.rs` - æºä»£ç  (æœ‰è¯¦ç»†æ³¨é‡Š)

## è°ƒè¯•æ¨¡å¼

å¦‚æœéœ€è¦æ›´è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ï¼Œå¯ä»¥åœ¨ debug æ¨¡å¼ä¸‹ç¼–è¯‘ï¼š

```bash
cargo build
./target/debug/termux-gui-rust-demo
```

Debug ç‰ˆæœ¬ä¼šï¼š
- åŒ…å«è°ƒè¯•ç¬¦å·
- ä¸è¿›è¡Œä¼˜åŒ–
- äºŒè¿›åˆ¶æ›´å¤§ (~5MB)
- æä¾›æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

## ä¸ Python ç‰ˆæœ¬å¯¹æ¯”

| ç‰¹æ€§ | Python | Rust (æœ¬é¡¹ç›®) |
|------|--------|--------------|
| å®‰è£…å¤§å° | ~40MB (è§£é‡Šå™¨+åº“) | 756KB |
| å¯åŠ¨æ—¶é—´ | ~300ms | ~50ms |
| å†…å­˜å ç”¨ | ~20MB | ~3MB |
| è¿è¡Œæ—¶ä¾èµ– | éœ€è¦Python | æ— ä¾èµ– |
| å¼€å‘é€Ÿåº¦ | å¿« | ä¸­ç­‰ |
| æ€§èƒ½ | ä¸­ç­‰ | æé«˜ |

è¯¦ç»†å¯¹æ¯”è¯·æŸ¥çœ‹ `æ¶æ„å¯¹æ¯”.md`

## è´¡çŒ®å’Œåé¦ˆ

è¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºé¡¹ç›®ï¼Œå±•ç¤ºäº†å¦‚ä½•ç”¨ Rust å®ç° Termux:GUI é€šä¿¡ã€‚

å¦‚æœä½ æœ‰é—®é¢˜æˆ–å»ºè®®ï¼š
1. æŸ¥çœ‹æºä»£ç æ³¨é‡Š
2. å‚è€ƒç›¸å…³æ–‡æ¡£
3. å°è¯•ä¿®æ”¹å’Œå®éªŒ

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ç”¨äºæ•™è‚²å’Œæ¼”ç¤ºç›®çš„ã€‚

---

**æœ€åæ›´æ–°**: 2025
**Rust ç‰ˆæœ¬**: 1.90.0
**æµ‹è¯•å¹³å°**: Android (ARM64)
